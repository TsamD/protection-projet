yok@yok-ThinkPad-13-2nd-Gen:~/Ephec/Vagrant/Examen/protection-before/ldap-server$ vagrant halt
==> default: Attempting graceful shutdown of VM...
yok@yok-ThinkPad-13-2nd-Gen:~/Ephec/Vagrant/Examen/protection-before/ldap-server$ vagrant destroy -f
==> default: Destroying VM and associated drives...
yok@yok-ThinkPad-13-2nd-Gen:~/Ephec/Vagrant/Examen/protection-before/ldap-server$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'ubuntu/jammy64'...
==> default: Matching MAC address for NAT networking...
==> default: Checking if box 'ubuntu/jammy64' version '20241002.0.0' is up to date...
==> default: Setting the name of the VM: ldap-server_default_1767722216948_82097
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
    default: Adapter 2: hostonly
    default: Adapter 3: intnet
==> default: Forwarding ports...
    default: 22 (guest) => 2222 (host) (adapter 1)
==> default: Running 'pre-boot' VM customizations...
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection reset. Retrying...
    default: Warning: Connection reset. Retrying...
    default: Warning: Connection reset. Retrying...
    default: Warning: Connection reset. Retrying...
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if it's present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
    default: The guest additions on this VM do not match the installed version of
    default: VirtualBox! In most cases this is fine, but in rare cases it can
    default: prevent things such as shared folders from working properly. If you see
    default: shared folder errors, please make sure the guest additions within the
    default: virtual machine match the version of VirtualBox you have installed on
    default: your host and reload your VM.
    default: 
    default: Guest Additions Version: 6.0.0 r127566
    default: VirtualBox Version: 7.2
==> default: Mounting shared folders...
    default: /home/yok/Ephec/Vagrant/Examen/protection-before/ldap-server => /vagrant
==> default: Running provisioner: file...
    default: ./files/01-netplan.yaml => /tmp/01-netplan.yaml
==> default: Running provisioner: file...
    default: ./files/install-krb5.txt => /home/vagrant/install-krb5.txt
==> default: Running provisioner: file...
    default: ./files/install-slapd.txt => /home/vagrant/install-slapd.txt
==> default: Running provisioner: file...
    default: ./files/ldap.conf => /home/vagrant/ldap.conf
==> default: Running provisioner: file...
    default: ./files/ldap-pass.txt => /home/vagrant/ldap-pass.txt
==> default: Running provisioner: file...
    default: ./files/realm-pass.txt => /home/vagrant/realm-pass.txt
==> default: Running provisioner: file...
    default: ./files/ubuntu-pass.txt => /home/vagrant/ubuntu-pass.txt
==> default: Running provisioner: file...
    default: ./files/ubuntuadmin-pass.txt => /home/vagrant/ubuntuadmin-pass.txt
==> default: Running provisioner: file...
    default: ./files/ldifs => /home/vagrant/ldifs
==> default: Running provisioner: file...
    default: ./files/tech-pass.txt => /home/vagrant/tech-pass.txt
==> default: Running provisioner: file...
    default: ./files/desk-pass.txt => /home/vagrant/desk-pass.txt
==> default: Running provisioner: file...
    default: ./files/admin-pass.txt => /home/vagrant/admin-pass.txt
==> default: Running provisioner: file...
    default: ./files/compta-pass.txt => /home/vagrant/compta-pass.txt
==> default: Running provisioner: file...
    default: ./files/staff-pass.txt => /home/vagrant/staff-pass.txt
==> default: Running provisioner: shell...
    default: Running: inline script
    default: WARNING:root:Cannot call Open vSwitch: ovsdb-server.service is not running.
    default: Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
    default: Get:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [128 kB]
    default: Get:3 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB]
    default: Get:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [127 kB]
    default: Get:5 http://archive.ubuntu.com/ubuntu jammy/universe amd64 Packages [14.1 MB]
    default: Get:6 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [2900 kB]
    default: Get:7 http://security.ubuntu.com/ubuntu jammy-security/main Translation-en [417 kB]
    default: Get:8 http://security.ubuntu.com/ubuntu jammy-security/main amd64 c-n-f Metadata [14.0 kB]
    default: Get:9 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [4883 kB]
    default: Get:10 http://security.ubuntu.com/ubuntu jammy-security/restricted Translation-en [917 kB]
    default: Get:11 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 c-n-f Metadata [652 B]
    default: Get:12 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [1007 kB]
    default: Get:13 http://security.ubuntu.com/ubuntu jammy-security/universe Translation-en [221 kB]
    default: Get:14 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 c-n-f Metadata [22.3 kB]
    default: Get:15 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 Packages [50.5 kB]
    default: Get:16 http://security.ubuntu.com/ubuntu jammy-security/multiverse Translation-en [10.2 kB]
    default: Get:17 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 c-n-f Metadata [376 B]
    default: Get:18 http://archive.ubuntu.com/ubuntu jammy/universe Translation-en [5652 kB]
    default: Get:19 http://archive.ubuntu.com/ubuntu jammy/universe amd64 c-n-f Metadata [286 kB]
    default: Get:20 http://archive.ubuntu.com/ubuntu jammy/multiverse amd64 Packages [217 kB]
    default: Get:21 http://archive.ubuntu.com/ubuntu jammy/multiverse Translation-en [112 kB]
    default: Get:22 http://archive.ubuntu.com/ubuntu jammy/multiverse amd64 c-n-f Metadata [8372 B]
    default: Get:23 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [3161 kB]
    default: Get:24 http://archive.ubuntu.com/ubuntu jammy-updates/main Translation-en [484 kB]
    default: Get:25 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 c-n-f Metadata [19.0 kB]
    default: Get:26 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [5043 kB]
    default: Get:27 http://archive.ubuntu.com/ubuntu jammy-updates/restricted Translation-en [944 kB]
    default: Get:28 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 c-n-f Metadata [644 B]
    default: Get:29 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [1244 kB]
    default: Get:30 http://archive.ubuntu.com/ubuntu jammy-updates/universe Translation-en [310 kB]
    default: Get:31 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 c-n-f Metadata [30.0 kB]
    default: Get:32 http://archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 Packages [57.6 kB]
    default: Get:33 http://archive.ubuntu.com/ubuntu jammy-updates/multiverse Translation-en [13.2 kB]
    default: Get:34 http://archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 c-n-f Metadata [600 B]
    default: Get:35 http://archive.ubuntu.com/ubuntu jammy-backports/main amd64 Packages [69.4 kB]
    default: Get:36 http://archive.ubuntu.com/ubuntu jammy-backports/main Translation-en [11.5 kB]
    default: Get:37 http://archive.ubuntu.com/ubuntu jammy-backports/main amd64 c-n-f Metadata [412 B]
    default: Get:38 http://archive.ubuntu.com/ubuntu jammy-backports/restricted amd64 c-n-f Metadata [116 B]
    default: Get:39 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [31.7 kB]
    default: Get:40 http://archive.ubuntu.com/ubuntu jammy-backports/universe Translation-en [16.9 kB]
    default: Get:41 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 c-n-f Metadata [672 B]
    default: Get:42 http://archive.ubuntu.com/ubuntu jammy-backports/multiverse amd64 c-n-f Metadata [116 B]
    default: Fetched 42.6 MB in 1min 20s (535 kB/s)
    default: Reading package lists...
    default: Selecting previously unselected package debconf-utils.
(Reading database ... 64257 files and directories currently installed.)
    default: Preparing to unpack .../debconf-utils_1.5.79ubuntu1_all.deb ...
    default: Unpacking debconf-utils (1.5.79ubuntu1) ...
    default: Setting up debconf-utils (1.5.79ubuntu1) ...
    default: Processing triggers for man-db (2.10.2-1) ...
    default: NEEDRESTART-VER: 3.5
    default: NEEDRESTART-KCUR: 5.15.0-144-generic
    default: NEEDRESTART-KEXP: 5.15.0-144-generic
    default: NEEDRESTART-KSTA: 1
    default: Preconfiguring packages ...
    default: Selecting previously unselected package libltdl7:amd64.
(Reading database ... 64289 files and directories currently installed.)
    default: Preparing to unpack .../libltdl7_2.4.6-15build2_amd64.deb ...
    default: Unpacking libltdl7:amd64 (2.4.6-15build2) ...
    default: Selecting previously unselected package libodbc2:amd64.
    default: Preparing to unpack .../libodbc2_2.3.9-5ubuntu0.1_amd64.deb ...
    default: Unpacking libodbc2:amd64 (2.3.9-5ubuntu0.1) ...
    default: Selecting previously unselected package slapd.
    default: Preparing to unpack .../slapd_2.5.19+dfsg-0ubuntu0.22.04.1_amd64.deb ...
    default: Unpacking slapd (2.5.19+dfsg-0ubuntu0.22.04.1) ...
    default: Selecting previously unselected package ldap-utils.
    default: Preparing to unpack .../ldap-utils_2.5.19+dfsg-0ubuntu0.22.04.1_amd64.deb ...
    default: Unpacking ldap-utils (2.5.19+dfsg-0ubuntu0.22.04.1) ...
    default: Setting up ldap-utils (2.5.19+dfsg-0ubuntu0.22.04.1) ...
    default: Setting up libltdl7:amd64 (2.4.6-15build2) ...
    default: Setting up libodbc2:amd64 (2.3.9-5ubuntu0.1) ...
    default: Setting up slapd (2.5.19+dfsg-0ubuntu0.22.04.1) ...
    default:   Creating new user openldap... done.
    default:   Creating initial configuration... done.
    default:   Creating LDAP directory... done.
    default: Processing triggers for ufw (0.36.1-4ubuntu0.1) ...
    default: Processing triggers for man-db (2.10.2-1) ...
    default: Processing triggers for libc-bin (2.35-0ubuntu3.10) ...
    default: NEEDRESTART-VER: 3.5
    default: NEEDRESTART-KCUR: 5.15.0-144-generic
    default: NEEDRESTART-KEXP: 5.15.0-144-generic
    default: NEEDRESTART-KSTA: 1
    default: Preconfiguring packages ...
    default: Selecting previously unselected package libgssrpc4:amd64.
(Reading database ... 64603 files and directories currently installed.)
    default: Preparing to unpack .../00-libgssrpc4_1.19.2-2ubuntu0.7_amd64.deb ...
    default: Unpacking libgssrpc4:amd64 (1.19.2-2ubuntu0.7) ...
    default: Selecting previously unselected package libkdb5-10:amd64.
    default: Preparing to unpack .../01-libkdb5-10_1.19.2-2ubuntu0.7_amd64.deb ...
    default: Unpacking libkdb5-10:amd64 (1.19.2-2ubuntu0.7) ...
    default: Selecting previously unselected package libkadm5srv-mit12:amd64.
    default: Preparing to unpack .../02-libkadm5srv-mit12_1.19.2-2ubuntu0.7_amd64.deb ...
    default: Unpacking libkadm5srv-mit12:amd64 (1.19.2-2ubuntu0.7) ...
    default: Selecting previously unselected package libevent-2.1-7:amd64.
    default: Preparing to unpack .../03-libevent-2.1-7_2.1.12-stable-1build3_amd64.deb ...
    default: Unpacking libevent-2.1-7:amd64 (2.1.12-stable-1build3) ...
    default: Selecting previously unselected package libverto-libevent1:amd64.
    default: Preparing to unpack .../04-libverto-libevent1_0.3.1-1ubuntu3_amd64.deb ...
    default: Unpacking libverto-libevent1:amd64 (0.3.1-1ubuntu3) ...
    default: Selecting previously unselected package libverto1:amd64.
    default: Preparing to unpack .../05-libverto1_0.3.1-1ubuntu3_amd64.deb ...
    default: Unpacking libverto1:amd64 (0.3.1-1ubuntu3) ...
    default: Selecting previously unselected package krb5-config.
    default: Preparing to unpack .../06-krb5-config_2.6+nmu1ubuntu1_all.deb ...
    default: Unpacking krb5-config (2.6+nmu1ubuntu1) ...
    default: Selecting previously unselected package libkadm5clnt-mit12:amd64.
    default: Preparing to unpack .../07-libkadm5clnt-mit12_1.19.2-2ubuntu0.7_amd64.deb ...
    default: Unpacking libkadm5clnt-mit12:amd64 (1.19.2-2ubuntu0.7) ...
    default: Selecting previously unselected package krb5-user.
    default: Preparing to unpack .../08-krb5-user_1.19.2-2ubuntu0.7_amd64.deb ...
    default: Unpacking krb5-user (1.19.2-2ubuntu0.7) ...
    default: Selecting previously unselected package krb5-kdc.
    default: Preparing to unpack .../09-krb5-kdc_1.19.2-2ubuntu0.7_amd64.deb ...
    default: Unpacking krb5-kdc (1.19.2-2ubuntu0.7) ...
    default: Selecting previously unselected package krb5-admin-server.
    default: Preparing to unpack .../10-krb5-admin-server_1.19.2-2ubuntu0.7_amd64.deb ...
    default: Unpacking krb5-admin-server (1.19.2-2ubuntu0.7) ...
    default: Setting up libgssrpc4:amd64 (1.19.2-2ubuntu0.7) ...
    default: Setting up krb5-config (2.6+nmu1ubuntu1) ...
    default: Setting up libevent-2.1-7:amd64 (2.1.12-stable-1build3) ...
    default: Setting up libkadm5clnt-mit12:amd64 (1.19.2-2ubuntu0.7) ...
    default: Setting up libkdb5-10:amd64 (1.19.2-2ubuntu0.7) ...
    default: Setting up libkadm5srv-mit12:amd64 (1.19.2-2ubuntu0.7) ...
    default: Setting up krb5-user (1.19.2-2ubuntu0.7) ...
    default: Setting up libverto-libevent1:amd64 (0.3.1-1ubuntu3) ...
    default: Setting up libverto1:amd64 (0.3.1-1ubuntu3) ...
    default: Setting up krb5-kdc (1.19.2-2ubuntu0.7) ...
    default: Created symlink /etc/systemd/system/multi-user.target.wants/krb5-kdc.service → /lib/systemd/system/krb5-kdc.service.
    default: Could not execute systemctl:  at /usr/bin/deb-systemd-invoke line 142.
    default: Setting up krb5-admin-server (1.19.2-2ubuntu0.7) ...
    default: Created symlink /etc/systemd/system/multi-user.target.wants/krb5-admin-server.service → /lib/systemd/system/krb5-admin-server.service.
    default: Processing triggers for libc-bin (2.35-0ubuntu3.10) ...
    default: Processing triggers for man-db (2.10.2-1) ...
    default: NEEDRESTART-VER: 3.5
    default: NEEDRESTART-KCUR: 5.15.0-144-generic
    default: NEEDRESTART-KEXP: 5.15.0-144-generic
    default: NEEDRESTART-KSTA: 1
    default: This script should be run on the master KDC/admin server to initialize
    default: a Kerberos realm.  It will ask you to type in a master key password.
    default: This password will be used to generate a key that is stored in
    default: /etc/krb5kdc/stash.  You should try to remember this password, but it
    default: is much more important that it be a strong password than that it be
    default: remembered.  However, if you lose the password and /etc/krb5kdc/stash,
    default: you cannot decrypt your Kerberos database.
    default: Loading random data
    default: Initializing database '/var/lib/krb5kdc/principal' for realm 'INTERFACE3.BE',
    default: master key name 'K/M@INTERFACE3.BE'
    default: You will be prompted for the database Master Password.
    default: It is important that you NOT FORGET this password.
    default: Enter KDC database master key:
    default: Re-enter KDC database master key to verify:
    default: 
    default: 
    default: Now that your realm is set up you may wish to create an administrative
    default: principal using the addprinc subcommand of the kadmin.local program.
    default: Then, this principal can be added to /etc/krb5kdc/kadm5.acl so that
    default: you can use the kadmin program on other computers.  Kerberos admin
    default: principals usually belong to a single user and end in /admin.  For
    default: example, if jruser is a Kerberos administrator, then in addition to
    default: the normal jruser principal, a jruser/admin principal should be
    default: created.
    default: 
    default: Don't forget to set up DNS information so your clients can find your
    default: KDC and admin servers.  Doing so is documented in the administration
    default: guide.
    default: No policy specified for ubuntu@INTERFACE3.BE; defaulting to no policy
    default: Authenticating as principal root/admin@INTERFACE3.BE with password.
    default: Enter password for principal "ubuntu@INTERFACE3.BE":
    default: Re-enter password for principal "ubuntu@INTERFACE3.BE":
    default: Principal "ubuntu@INTERFACE3.BE" created.
    default: No policy specified for ubuntu/admin@INTERFACE3.BE; defaulting to no policy
    default: Authenticating as principal root/admin@INTERFACE3.BE with password.
    default: Enter password for principal "ubuntu/admin@INTERFACE3.BE":
    default: Re-enter password for principal "ubuntu/admin@INTERFACE3.BE":
    default: Principal "ubuntu/admin@INTERFACE3.BE" created.
    default: Authenticating as principal ubuntu/admin with password.
    default: kadmin: Communication failure with server while initializing kadmin interface
    default: Password for ubuntu/admin@INTERFACE3.BE:
The SSH command responded with a non-zero exit status. Vagrant
assumes that this means the command failed. The output for this command
should be in the log above. Please read the output to determine what
went wrong.
